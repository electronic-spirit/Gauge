
#include "Measure_options.h"
#include "u8g2_LCD.h"
extern u8g2_t u8g2;


#define X_POSITION  	200
#define Y_POSITION 		25
#define STR2STR 		26
#define max_edit_param 	5

const uint8_t on_icon[]={0,24,0,24,0x1F, 0xFF, 0xF8, 0x7F, 0xFF, 0xFC, 0x7F, 0xFF, 0xFE, 0xF0, 0x00, 0x0F, 0xE0, 0x00, 0x47, 0xE0, 0x00, 0xE7, 0xE0, 0x01, 0xE7, 0xE0, 0x01, 0xC7, 0xE2, 0x01, 0xC7, 0xE7, 0x03, 0xC7, 0xE7, 0x83, 0x87, 0xE3, 0xC7, 0x87, 0xE1, 0xC7, 0x07, 0xE1, 0xE7, 0x07, 0xE0, 0xEE, 0x07, 0xE0, 0xFE, 0x07, 0xE0, 0x7E, 0x07, 0xE0, 0x3C, 0x07, 0xE0, 0x1C, 0x07, 0xE0, 0x00, 0x07, 0xF0, 0x00, 0x0F, 0x7F, 0xFF, 0xFE, 0x3F, 0xFF, 0xFC, 0x1F, 0xFF, 0xF8};
const uint8_t off_icon[]={0,24,0,24,0x1F, 0xFF, 0xF8, 0x7F, 0xFF, 0xFC, 0x7F, 0xFF, 0xFE, 0xF0, 0x00, 0x0F, 0xEE, 0x00, 0x77, 0xEF, 0x00, 0xF7, 0xEF, 0x81, 0xF7, 0xE7, 0xC3, 0xE7, 0xE3, 0xE7, 0xC7, 0xE1, 0xFF, 0x87, 0xE0, 0xFF, 0x07, 0xE0, 0x7E, 0x07, 0xE0, 0x7E, 0x07, 0xE0, 0xFF, 0x07, 0xE1, 0xFF, 0x87, 0xE3, 0xE7, 0xC7, 0xE7, 0xC3, 0xE7, 0xEF, 0x81, 0xF7, 0xEF, 0x00, 0xF7, 0xEE, 0x00, 0x77, 0xF0, 0x00, 0x0F, 0x7F, 0xFF, 0xFE, 0x3F, 0xFF, 0xFC, 0x1F, 0xFF, 0xF8};
const uint8_t up_icon[]={0,24,0,24,0x1F, 0xFF, 0xF8, 0x7F, 0xFF, 0xFC, 0x7F, 0xFF, 0xFE, 0xF0, 0x00, 0x0F, 0xE0, 0x00, 0x77, 0xE0, 0x00, 0xF7, 0xE0, 0x01, 0xF7, 0xE0, 0x03, 0xE7, 0xE0, 0x07, 0xC7, 0xE0, 0x0F, 0x87, 0xE0, 0x1F, 0x07, 0xE0, 0x3E, 0x07, 0xE0, 0x7C, 0x07, 0xE0, 0xF8, 0x07, 0xE1, 0xF0, 0x07, 0xE3, 0xE0, 0x07, 0xE7, 0xC0, 0x07, 0xEF, 0x80, 0x07, 0xEF, 0x00, 0x07, 0xEE, 0x00, 0x07, 0xF0, 0x00, 0x0F, 0x7F, 0xFF, 0xFE, 0x3F, 0xFF, 0xFC, 0x1F, 0xFF, 0xF8};
const uint8_t down_icon[]={0,24,0,24,0x1F, 0xFF, 0xF8, 0x7F, 0xFF, 0xFC, 0x7F, 0xFF, 0xFE, 0xF0, 0x00, 0x0F, 0xEE, 0x00, 0x07, 0xEF, 0x00, 0x07, 0xEF, 0x80, 0x07, 0xE7, 0xC0, 0x07, 0xE3, 0xE0, 0x07, 0xE1, 0xF0, 0x07, 0xE0, 0xF8, 0x07, 0xE0, 0x7C, 0x07, 0xE0, 0x3E, 0x07, 0xE0, 0x1F, 0x07, 0xE0, 0x0F, 0x87, 0xE0, 0x07, 0xC7, 0xE0, 0x03, 0xE7, 0xE0, 0x01, 0xF7, 0xE0, 0x00, 0xF7, 0xE0, 0x00, 0x77, 0xF0, 0x00, 0x0F, 0x7F, 0xFF, 0xFE, 0x3F, 0xFF, 0xFC, 0x1F, 0xFF, 0xF8};
const uint8_t neg_pulse_icon[]={0,24,0,24,0x1F, 0xFF, 0xF8, 0x7F, 0xFF, 0xFC, 0x7F, 0xFF, 0xFE, 0xF0, 0x00, 0x0F, 0xE0, 0x00, 0x07, 0xE7, 0xC3, 0xE7, 0xE7, 0xC3, 0xE7, 0xE7, 0xC3, 0xE7, 0xE1, 0xC3, 0x87, 0xE1, 0xC3, 0x87, 0xE1, 0xC3, 0x87, 0xE1, 0xC3, 0x87, 0xE1, 0xC3, 0x87, 0xE1, 0xC3, 0x87, 0xE1, 0xC3, 0x87, 0xE1, 0xC3, 0x87, 0xE1, 0xFF, 0x87, 0xE1, 0xFF, 0x87, 0xE1, 0xFF, 0x87, 0xE0, 0x00, 0x07, 0xF0, 0x00, 0x0F, 0x7F, 0xFF, 0xFE, 0x3F, 0xFF, 0xFC, 0x1F, 0xFF, 0xF8};
const uint8_t pos_pulse_icon[]={0,24,0,24,0x1F, 0xFF, 0xF8, 0x7F, 0xFF, 0xFC, 0x7F, 0xFF, 0xFE, 0xF0, 0x00, 0x0F, 0xE0, 0x00, 0x07, 0xE1, 0xFF, 0xC7, 0xE1, 0xFF, 0xC7, 0xE1, 0xFF, 0xC7, 0xE1, 0xC1, 0xC7, 0xE1, 0xC1, 0xC7, 0xE1, 0xC1, 0xC7, 0xE1, 0xC1, 0xC7, 0xE1, 0xC1, 0xC7, 0xE1, 0xC1, 0xC7, 0xE1, 0xC1, 0xC7, 0xE1, 0xC1, 0xC7, 0xEF, 0xC1, 0xF7, 0xEF, 0xC1, 0xF7, 0xEF, 0xC1, 0xF7, 0xE0, 0x00, 0x07, 0xF0, 0x00, 0x0F, 0x7F, 0xFF, 0xFE, 0x3F, 0xFF, 0xFC, 0x1F, 0xFF, 0xF8};
const uint8_t press_on_icon[]={0,24,0,24,0x1F, 0xFF, 0xF8, 0x7F, 0xFF, 0xFC, 0x7F, 0xFF, 0xFE, 0xF0, 0x00, 0x0F, 0xE0, 0x00, 0x07, 0xE0, 0xFF, 0x07, 0xE0, 0xFF, 0x07, 0xE0, 0xFF, 0x07, 0xE0, 0xE7, 0x07, 0xE0, 0xE7, 0x07, 0xE0, 0xE7, 0x07, 0xE0, 0xFF, 0x07, 0xE0, 0xFF, 0x07, 0xE0, 0xFF, 0x07, 0xE0, 0xE0, 0x07, 0xE0, 0xE0, 0x07, 0xE0, 0xE0, 0x07, 0xE0, 0xE0, 0x07, 0xE0, 0xE0, 0x07, 0xE0, 0x00, 0x07, 0xF0, 0x00, 0x0F, 0x7F, 0xFF, 0xFE, 0x3F, 0xFF, 0xFC, 0x1F, 0xFF, 0xF8};
const uint8_t press_off_icon[]={0,24,0,24,0x1F, 0xFF, 0xF8, 0x7F, 0xFF, 0xFC, 0x7F, 0xFF, 0xFE, 0xF0, 0x00, 0x0F, 0xE0, 0x00, 0x07, 0xE4, 0xFF, 0x27, 0xE2, 0xFF, 0x47, 0xE1, 0xFF, 0x87, 0xE0, 0xE7, 0x07, 0xE0, 0xE7, 0x07, 0xE0, 0xE7, 0x07, 0xE0, 0xFF, 0x07, 0xE0, 0xFF, 0x07, 0xE0, 0xFF, 0x07, 0xE0, 0xE2, 0x07, 0xE0, 0xE1, 0x07, 0xE1, 0xE0, 0x87, 0xE2, 0xE0, 0x47, 0xE4, 0xE0, 0x27, 0xE0, 0x00, 0x07, 0xF0, 0x00, 0x0F, 0x7F, 0xFF, 0xFE, 0x3F, 0xFF, 0xFC, 0x1F, 0xFF, 0xF8};
const uint8_t time_icon[]={0,24,0,24,0x1F, 0xFF, 0xF8, 0x7F, 0xFF, 0xFC, 0x7F, 0xFF, 0xFE, 0xF0, 0x00, 0x0F, 0xE0, 0x00, 0x07, 0xE0, 0x30, 0x07, 0xE0, 0x30, 0x07, 0xE0, 0x30, 0x07, 0xE0, 0x30, 0x07, 0xE0, 0x30, 0x07, 0xE0, 0xFC, 0x07, 0xE0, 0xFC, 0x07, 0xE0, 0x30, 0x07, 0xE0, 0x30, 0x07, 0xE0, 0x30, 0x07, 0xE0, 0x31, 0x87, 0xE0, 0x33, 0x87, 0xE0, 0x3F, 0x07, 0xE0, 0x1E, 0x07, 0xE0, 0x00, 0x07, 0xF0, 0x00, 0x0F, 0x7F, 0xFF, 0xFE, 0x3F, 0xFF, 0xFC, 0x1F, 0xFF, 0xF8};



void Measure_options_screen_func(void)
{
	RTC_view();
	u8g2_SetFont(&u8g2, u8g2_font_10x20_t_cyrillic);


		// "ПИКОВЫЕ ЗНАЧЕНИЯ");
		Blink_Edit_Parameter(15, Y_POSITION+STR2STR*0+6, "ПИКОВЫЕ ЗНАЧЕНИЯ", edit_param, 0);
		switch(mm_peak)
		{
			case 0: DrawImage(on_icon, X_POSITION, Y_POSITION+STR2STR*0, 1); break;
			case 1: DrawImage(off_icon, X_POSITION, Y_POSITION+STR2STR*0, 1); break;
		}

		// "ОБНАРУЖЕНИЕ УТЕЧЕК"
		Blink_Edit_Parameter(15, Y_POSITION+STR2STR*1+6, "ОБНАРУЖЕНИЕ УТЕЧЕК", edit_param, 1);
		switch(leak_detect)
		{
			case 0: DrawImage(on_icon, X_POSITION, Y_POSITION+STR2STR*1, 1); break;
			case 1: DrawImage(off_icon, X_POSITION, Y_POSITION+STR2STR*1, 1); break;
			case 2: DrawImage(time_icon, X_POSITION, Y_POSITION+STR2STR*1, 1); break;
		}

		// "P+V"
		Blink_Edit_Parameter(15, Y_POSITION+STR2STR*2+6, "P+V", edit_param, 2);
		switch(PV)
		{
			case 0: DrawImage(on_icon, X_POSITION, Y_POSITION+STR2STR*2, 1); break;
			case 1: DrawImage(off_icon, X_POSITION, Y_POSITION+STR2STR*2, 1); break;
		}

		// "P+I"
		Blink_Edit_Parameter(15, Y_POSITION+STR2STR*3+6, "P+I", edit_param, 3);
		switch(PI)
		{
			case 0: DrawImage(on_icon, X_POSITION, Y_POSITION+STR2STR*3, 1); break;
			case 1: DrawImage(off_icon, X_POSITION, Y_POSITION+STR2STR*3, 1); break;
		}

		// "P+E"
		Blink_Edit_Parameter(15, Y_POSITION+STR2STR*4+6, "P+E", edit_param, 4);
		switch(PE)
		{
			case 0: DrawImage(on_icon, X_POSITION, Y_POSITION+STR2STR*4, 1); break;
			case 1: DrawImage(off_icon, X_POSITION, Y_POSITION+STR2STR*4, 1); break;
			case 2: DrawImage(press_on_icon,X_POSITION, Y_POSITION+STR2STR*4, 1); break;
			case 3: DrawImage(press_off_icon,X_POSITION, Y_POSITION+STR2STR*4, 1); break;
			case 4: DrawImage(up_icon, X_POSITION, Y_POSITION+STR2STR*4, 1); break;
			case 5: DrawImage(down_icon, X_POSITION, Y_POSITION+STR2STR*4, 1); break;
			case 6: DrawImage(pos_pulse_icon, X_POSITION, Y_POSITION+STR2STR*4, 1); break;
			case 7: DrawImage(neg_pulse_icon, X_POSITION, Y_POSITION+STR2STR*4, 1); break;
		}



	u8g2_SendBuffer(&u8g2);
	u8g2_ClearBuffer(&u8g2);
}


// DOWN
void Measure_options_screen_S6(void)
{
	if(edit_param<(max_edit_param-1))edit_param++;
}

// UP
void Measure_options_screen_S7(void)
{
	if(edit_param>0)edit_param--;
}




// MENU
void Measure_options_screen_S9(void)
{
	screen=Option_screen;
	old_active_string=0xFF;
	Menu_num=0;
}

// BACKWARD
void Measure_options_screen_S8(void)
{
	switch(edit_param)
	{
		case 0: if(mm_peak>0)mm_peak--; break;
		case 1: if(leak_detect>0)leak_detect--; break;
		case 2: if(PV>0)PV--; break;
		case 3: if(PI>0)PI--; break;
		case 4: if(PE>0)PE--; break;
	}
}

// FORWARD
void Measure_options_screen_S5(void)
{
	switch(edit_param)
	{
		case 0: if(mm_peak<1)mm_peak++; break;
		case 1: if(leak_detect<2)leak_detect++; break;
		case 2: if(PV<1)PV++; break;
		case 3: if(PI<1)PI++; break;
		case 4: if(PE<7)PE++; break;
	}
}

